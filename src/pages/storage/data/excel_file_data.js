import memoize from 'memoize-one';
import { formatedDate, timeStampToClock, ucwords } from '../../../utils/helper';

const excelFileData = memoize((retry) => [
  {
    name: 'Task Id',
    sortable: true,
    selector: row => row.id,
    cell: row => (
      <div className="td-text mb-1">
        {row.id}
      </div>
    )
  },
  {
    name: 'Generated Date',
    sortable: true,
    selector: row => row.created_at,
    cell: row => (
      <div className="td-text mb-1">
        {formatedDate(row.created_at.toString())}
      </div>
    )
  },
  {
    name: 'Generated Clock',
    sortable: true,
    selector: row => row.created_at,
    cell: row => (
      <div className="td-text mb-1">
        {timeStampToClock(row.created_at.toString())}
      </div>
    )
  },
  {
    name: 'Generated By',
    sortable: true,
    selector: row => row.manager.name,
    cell: row => (
      <div className="td-text mb-1">
        {row.manager.name} | {row.manager.role}
      </div>
    )
  },
  {
    name: 'Type',
    sortable: true,
    selector: row => row.type,
    cell: row => (
      <div className="td-text mb-1">
        {ucwords(row.type)}
      </div>
    )
  },
  {
    name: 'Status',
    sortable: true,
    selector: row => row.status,
    cell: row => {
      if (row.status === 'pending') {
        return (
          <div className="td-text mb-1">
            <span className="badge badge-radius" style={{ background: '#FCB756' }}>PENDING</span>
          </div>
        );
      } else if (row.status === 'processing') {
        return (
          <div className="td-text mb-1">
            <span className="badge badge-radius" style={{ background: '#19C8FF' }}>PROCESSING</span>
          </div>
        );
      } else if (row.status === 'finished') {
        return (
          <div className="td-text mb-1">
            <span className="badge badge-radius" style={{ background: '#1cd666' }}>FINISHED</span>
          </div>
        );
      } else {
        return (
          <div className="td-text mb-1">
            <span className="badge badge-radius" style={{ background: '#FF1111' }}>FAILED</span> <br />
            <button className="mt-2 btn btn-warning" style={{ fontSize: '12px', borderRadius: '4px', color: 'white'}} onClick={() => retry(row.id, row.source_type)} type="button">Retry</button>
          </div>
        );
      }
    }
  },
  {
    name: 'File',
    sortable: false,
    cell: row => (
      <div className="td-text mb-1">
        <a href={row.download} target="_blank" rel="noreferrer">Files Here</a>
      </div>
    )
  },
  {
    name: 'Message',
    sortable: false,
    cell: row => (
      <div className="td-text mb-1">
        <p>{row.message}</p>
      </div>
    )
  },
]);

export default excelFileData;
